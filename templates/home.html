{% extends "base.html" %}
{% load static %}
{% load humanize %}
{% load dict_filters %}
{% load format_filters %}


{% block title %}Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯{% endblock %}

{% block content %}

<h4 class="mb-4 text-center">ğŸ‘‹ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ {{ request.user.username }}</h4>

<div class="row g-4">

    <!-- âœ… Ø³ØªÙˆÙ† Ø±Ø§Ø³Øª: Ù„ÛŒØ³Øª Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø³Ù†Ú¯â€ŒÙ‡Ø§ -->
    <div class="col-lg-4">
        <div class="card shadow-sm rounded-4">
            <div class="card-body">
                <h5 class="mb-3">ğŸ“¦ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø³Ù†Ú¯â€ŒÙ‡Ø§</h5>
                <ul class="list-group small" style="max-height: 250px; overflow-y: auto;">
                    {% for stone in stones %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            {{ stone.name }}
                            <span class="badge bg-secondary">{{ stone.stock_box|smart_round }} Ú©Ø§Ø±ØªÙ†</span>
                        </li>
                    {% empty %}
                        <li class="list-group-item text-muted">Ù‡ÛŒÚ† Ø³Ù†Ú¯ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <!-- âœ… Ø³ØªÙˆÙ† Ú†Ù¾: Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ -->
    <div class="col-lg-8">
        <div class="row g-3">

            <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§: Ø¯ÙˆØªØ§ Ø¯Ø± Ù‡Ø± Ø±Ø¯ÛŒÙ -->
            <div class="col-md-6">
                <a href="{% url 'invoices' %}" class="btn btn-outline-primary w-100 py-4 rounded-4">ğŸ§¾ ÙØ§Ú©ØªÙˆØ± ÙØ±ÙˆØ´</a>
            </div>
            <div class="col-md-6">
                <a href="{% url 'customers' %}" class="btn btn-outline-success w-100 py-4 rounded-4">ğŸ‘¤ Ù…Ø´ØªØ±ÛŒâ€ŒÙ‡Ø§</a>
            </div>
            <div class="col-md-6">
                <a href="{% url 'expenses' %}" class="btn btn-outline-danger w-100 py-4 rounded-4">ğŸ’° Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§</a>
            </div>
            <div class="col-md-6">
                <a href="{% url 'inventory' %}" class="btn btn-outline-warning w-100 py-4 rounded-4">ğŸ¬ Ø§Ù†Ø¨Ø§Ø±</a>
            </div>

            <!-- Ø¯Ú©Ù…Ù‡ Ø¨Ø²Ø±Ú¯ Ø¯Ø± Ø§Ù†ØªÙ‡Ø§ -->
            <div class="col-12">
                <a href="{% url 'financial' %}" class="btn btn-outline-info w-100 py-4 rounded-4">
                    ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù„ÛŒ
                </a>
            </div>
            
            <div class="col-12">
                <a href="{% url 'download_backup' %}" class="btn btn-outline-dark w-100 py-4 rounded-4">
                    ğŸ“¥ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¨Ú©Ø§Ù¾ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
                </a>
            </div>

        </div>
    </div>

    <!-- âœ… Ù¾Ø§ÛŒÛŒÙ† ØµÙØ­Ù‡: Ø¬Ø¯ÙˆÙ„ ÙØ§Ú©ØªÙˆØ±Ù‡Ø§ÛŒ Ø§Ø®ÛŒØ± -->
    <div class="col-12">
        <div class="card shadow-sm rounded-4">
            <div class="card-body">
                <h5 class="mb-3">ğŸ§¾ Ø¢Ø®Ø±ÛŒÙ† ÙØ§Ú©ØªÙˆØ±Ù‡Ø§ÛŒ ÙØ±ÙˆØ´</h5>
                <div class="table-responsive" style="max-height: 300px;">
                    <table class="table table-bordered table-hover table-sm align-middle text-center">
                        <thead class="table-light">
                            <tr>
                                <th>ØªØ§Ø±ÛŒØ®</th>
                                <th>Ù…Ø´ØªØ±ÛŒ</th>
                                <th>Ø·Ø±Ø­</th>
                                <th>Ù‚ÙˆØ§Ø±Ù‡</th>
                                <th>Ø¬Ù…Ø¹ Ú©Ù„</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for invoice in latest_invoices %}
                                <tr>
                                    <td>{{ invoice.date }}</td>
                                    <td>{{ invoice.customer.name }}</td>
                                    <td>{{ invoice.design.title }}</td>
                                    <td>{{ invoice.quantity }}</td>
                                    <td>{{ invoice.total_price|comma }} ØªÙˆÙ…Ø§Ù†</td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="5" class="text-center text-muted">Ù‡Ù†ÙˆØ² ÙØ§Ú©ØªÙˆØ±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</div>
{% endblock %}
